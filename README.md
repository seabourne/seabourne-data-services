# seabourne-data-services

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Introduction](#introduction)
-   [License](#license)
-   [Service Classes](#service-classes)
    -   [StreamedDataService](#streameddataservice)
        -   [Parameters](#parameters)
        -   [\_getData](#_getdata)
            -   [Parameters](#parameters-1)
        -   [\_makeKey](#_makekey)
            -   [Parameters](#parameters-2)
-   [Support Classes](#support-classes)
    -   [NDJSONEncodeStream](#ndjsonencodestream)
        -   [Parameters](#parameters-3)
        -   [makeKeyFn](#makekeyfn)
            -   [Parameters](#parameters-4)

## Introduction

The Seabourne Data Services package provides classes for serving
data from a network source to network clients.


## License

[MIT](https://github.com/seabourne/seabourne-data-services/blob/master/LICENSE)


## Service Classes




### StreamedDataService

Streamed data service.
Data service that delivers data as an NDJSON-encoded stream.

#### Parameters

-   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** configuration options:-   `getData` **<Function>** implementation for the service
        `_getData()` method
    -   `key` **&lt;Function|string>** data entity key access function;
        or, if a string is specified, the name of the data entity
        property to be used as the key

#### \_getData

Gets data to serve request.

##### Parameters

-   `request` **[Request](https://developer.mozilla.org/Add-ons/SDK/High-Level_APIs/request)** request context

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** two-element array consisting of a header object and
  a readable stream that delivers the data entities

#### \_makeKey

Gets key from data entity.

##### Parameters

-   `obj` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** data entity

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** key

## Support Classes

The package also includes a handful of support classes.


### NDJSONEncodeStream

**Extends Transform**

Transform stream to perform NDJSON-encoding.

The stream accepts as input a sequence of objects, and emits
NDJSON-encoded output.

For each object, it constructs a two-element array consisting of the
object key and the object itself, then JSON-encodes the array.

#### Parameters

-   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** configuration options-   `key` **Function** - key access function
    -   `prefixes` **Array** - array of objects to be NDJSON-encoded and
        emitted before the main sequence of objects
    -   `suffixes` **Array** - array of objects to be NDJSON-encoded and
        emitted after the main sequence of objects

#### makeKeyFn

Makes a key access function.
Given an object, the key access function returns an object key.

##### Parameters

-   `prop` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of object property to be used as key
-   `prefix` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** prefix to be prepended to key

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** key access function
